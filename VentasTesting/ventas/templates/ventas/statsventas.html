{% extends 'appCore/base.html' %}
{% block title%} MGM - Estadísticas de Ventas {% endblock %}
{% block content %}
<section class="title-sec">
    <h2>Estadísticas de Ventas</h2>
</section>

<section class="stats-sec">
    <!-- Tabla de Clientes con Más Ventas -->
    <div class="table-container">
        <h3>Clientes con Más Ventas</h3>
        <p>Cliente con mas ventas: {{ cliente_con_mas_ventas }}</p>
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Cliente</th>
                    <th>Cantidad de Ventas</th>
                </tr>
            </thead>
            <tbody>
                {% for cliente in clientes_con_ventas %}
                <tr>
                    <td>{{ cliente.nombre }} {{ cliente.apellido }}</td>
                    <td>{{ cliente.total_ventas }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="2">No hay datos disponibles.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Tabla de Productos Más Vendidos -->
    <div class="table-container">
        <h3>Productos Más Vendidos</h3>
        <p>Producto más vendido: {{ producto_mas_vendido }}</p>
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Total Vendido</th>
                </tr>
            </thead>
            <tbody>
                {% for producto in productos_mas_vendidos %}
                <tr>
                    <td>{{ producto.nombre }}</td>
                    <td>{{ producto.total_vendido|default:0 }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="2">No hay datos disponibles.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endblock%}
